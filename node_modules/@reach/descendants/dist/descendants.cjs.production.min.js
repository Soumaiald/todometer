"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,r=require("@reach/utils");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}exports.DescendantProvider=function(e){var r=e.context,c=e.children,u=e.items,i=e.set,s=n.useCallback((function(e){var t=e.element,n=a(e,["element"]);t&&i((function(e){var r,a;if(0===e.length)r=o({element:t,index:0},n),a=[].concat(e,[r]);else if(e.find((function(e){return e.element===t})))a=e;else{var c=e.findIndex((function(e){return!(!e.element||!t)&&Boolean(e.element.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING)}));r=o({element:t,index:c},n),a=-1===c?[].concat(e,[r]):[].concat(e.slice(0,c),[r],e.slice(c))}return a.map((function(e,t){return o({},e,{index:t})}))}))}),[]),l=t.useCallback((function(e){e&&i((function(t){return t.filter((function(t){return e!==t.element}))}))}),[]),f=t.useMemo((function(){return{descendants:u,registerDescendant:s,unregisterDescendant:l}}),[u,s,l]);return n.createElement(r.Provider,{value:f},c)},exports.createDescendantContext=function(e,t){return void 0===t&&(t={}),r.createNamedContext(e,o({descendants:[],registerDescendant:r.noop,unregisterDescendant:r.noop},t))},exports.useDescendant=function(e,n){var c=e.context,u=e.element,i=a(e,["context","element"]),s=t.useState()[1],l=t.useContext(c),f=l.registerDescendant,d=l.unregisterDescendant,v=l.descendants;return r.useIsomorphicLayoutEffect((function(){return u||s({}),f(o({element:u},i)),function(){return d(u)}}),[u].concat(Object.values(i))),null!=n?n:v.findIndex((function(e){return e.element===u}))},exports.useDescendantKeyDown=function(e,n){var r=t.useContext(e).descendants,a=n.currentIndex,c=n.orientation,u=void 0===c?"vertical":c,i=n.callback,s=n.filter,l=n.rotate,f=void 0===l||l,d=n.rtl,v=void 0!==d&&d,p=null!=a?a:-1,D=n.key||"index";return function(e){if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(e.key)){var t=r;if(s){t=[];for(var n=-1,c=0;c<r.length;c++){var l=r[c];s(l)&&(t.push(o({},l,{index:n++})),p=c===a?n:p)}t=r.filter(s)}if(t.length)switch(e.key){case"ArrowDown":"vertical"!==u&&"both"!==u||(e.preventDefault(),i(d()[D]));break;case"ArrowUp":"vertical"!==u&&"both"!==u||(e.preventDefault(),i(h()[D]));break;case"ArrowLeft":"horizontal"!==u&&"both"!==u||(e.preventDefault(),i((v?d:h)()[D]));break;case"ArrowRight":"horizontal"!==u&&"both"!==u||(e.preventDefault(),i((v?h:d)()[D]));break;case"PageUp":e.preventDefault(),i((e.ctrlKey?h:g)()[D]);break;case"Home":e.preventDefault(),i(g()[D]);break;case"PageDown":e.preventDefault(),i((e.ctrlKey?d:m)()[D]);break;case"End":e.preventDefault(),i(m()[D])}}function d(){return p===t.length-1?f?g():t[p]:t[(p+1)%t.length]}function h(){return 0===p?f?m():t[p]:t[(p-1+t.length)%t.length]}function g(){return t[0]}function m(){return t[t.length-1]}}},exports.useDescendants=function(){return t.useState([])};
//# sourceMappingURL=descendants.cjs.production.min.js.map
