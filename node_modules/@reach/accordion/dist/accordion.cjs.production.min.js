"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("react"),t=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,r=require("@reach/utils"),a=require("@reach/descendants"),o=require("@reach/auto-id");function d(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n.indexOf(t=o[r])>=0||(a[t]=e[t]);return a}require("prop-types"),require("warning");var i,c=a.createDescendantContext("AccordionDescendantContext"),l=r.createNamedContext("AccordionContext",{}),s=r.createNamedContext("AccordionItemContext",{}),u=function(){return n.useContext(l)},f=function(){return n.useContext(s)};(i=exports.AccordionStates||(exports.AccordionStates={})).Open="open",i.Collapsed="collapsed";var p=n.forwardRef((function(e,i){var s=e.children,u=e.defaultIndex,f=e.index,p=e.onChange,b=e.readOnly,v=void 0!==b&&b,x=e.collapsible,h=void 0!==x&&x,A=e.multiple,m=void 0!==A&&A,y=d(e,["children","defaultIndex","index","onChange","readOnly","collapsible","multiple"]),I=n.useRef(void 0!==f).current,C=a.useDescendants(),w=C[0],D=C[1],O=o.useId(y.id),k=n.useState((function(){switch(!0){case I:return f;case null!=u:return m?Array.isArray(u)?u:[u]:Array.isArray(u)?null!==(e=u[0])&&void 0!==e?e:0:u;var e;case h:return m?[-1]:-1;default:return m?[0]:0}})),g=k[0],E=k[1],P=n.useCallback((function(e){p&&p(e),I||E((function(n){return e=e,m?(n=n).includes(e)?n.length>1||h?n.filter((function(n){return n!==e})):n:[].concat(n,[e]).sort():(n=n)===e&&h?-1:e}))}),[h,I,m,p]),R=n.useMemo((function(){return{accordionId:O,openPanels:I?f:g,onSelectPanel:v?r.noop:P,readOnly:v}}),[g,f,O,I,P,v]);return n.useEffect((function(){return r.checkStyles("accordion")}),[]),t.createElement(a.DescendantProvider,{context:c,items:w,set:D},t.createElement(l.Provider,{value:R},t.createElement("div",Object.assign({},y,{ref:i,"data-reach-accordion":""}),s)))})),b=r.forwardRefWithAs((function(e,o){var i=e.as,l=void 0===i?"div":i,f=e.children,p=e.disabled,b=void 0!==p&&p,v=d(e,["as","children","disabled"]),x=u(),h=x.accordionId,A=x.openPanels,m=x.readOnly,y=n.useRef(null),I=a.useDescendant({context:c,element:y.current,disabled:b}),C=r.makeId(h,I),w=r.makeId("panel",C),D=r.makeId("button",C),O=Array.isArray(A)?A.includes(I):A===I,k={"data-state":O?exports.AccordionStates.Open:exports.AccordionStates.Collapsed,"data-disabled":b?"true":void 0,"data-read-only":m?"true":void 0};return t.createElement(s.Provider,{value:{open:O,disabled:b,buttonId:D,index:I,itemId:C,buttonRef:y,panelId:w,dataAttributes:k}},t.createElement(l,Object.assign({},v,{ref:o,"data-reach-accordion-item":""},k),f))})),v=r.forwardRefWithAs((function(e,n){var o=e.as,i=void 0===o?"button":o,l=e.children,s=e.onClick,p=e.onKeyDown,b=e.tabIndex,v=d(e,["as","children","onClick","onKeyDown","onMouseDown","onPointerDown","tabIndex"]),x=u().onSelectPanel,h=f(),A=h.open,m=h.dataAttributes,y=h.disabled,I=h.buttonId,C=h.buttonRef,w=h.index,D=h.panelId,O=r.useForkedRef(n,C),k=a.useDescendantKeyDown(c,{currentIndex:w,orientation:"vertical",key:"element",rotate:!0,callback:function(e){e&&e.focus()},filter:function(e){return!e.disabled}});return t.createElement(i,Object.assign({"aria-controls":D,"aria-expanded":A},v,{ref:O,"data-reach-accordion-button":""},m,{disabled:y||void 0,id:I,onClick:r.wrapEvent(s,(function(e){e.preventDefault(),y||(C.current.focus(),x(w))})),onKeyDown:r.wrapEvent(p,k),tabIndex:y?-1:b}),l)})),x=r.forwardRefWithAs((function(e,n){var r=e.as,a=void 0===r?"div":r,o=e.children,i=d(e,["as","children"]),c=f();return t.createElement(a,Object.assign({hidden:!c.open,role:"region","aria-labelledby":c.buttonId},i,{ref:n,"data-reach-accordion-panel":""},c.dataAttributes,{id:c.panelId,tabIndex:-1}),o)}));exports.Accordion=p,exports.AccordionButton=v,exports.AccordionItem=b,exports.AccordionPanel=x;
//# sourceMappingURL=accordion.cjs.production.min.js.map
